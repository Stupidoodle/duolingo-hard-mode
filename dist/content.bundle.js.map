{"version":3,"file":"content.bundle.js","mappings":"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","sources":["webpack://duolingo-hard-mode/./src/Challenge.js","webpack://duolingo-hard-mode/./src/ChallengeFactory.js","webpack://duolingo-hard-mode/./src/ChallengeTapComplete.js","webpack://duolingo-hard-mode/./src/ChallengeTranslate.js","webpack://duolingo-hard-mode/./src/ExtensionEventManager.js","webpack://duolingo-hard-mode/./src/WordBank.js","webpack://duolingo-hard-mode/webpack/bootstrap","webpack://duolingo-hard-mode/webpack/runtime/define property getters","webpack://duolingo-hard-mode/webpack/runtime/hasOwnProperty shorthand","webpack://duolingo-hard-mode/webpack/runtime/make namespace object","webpack://duolingo-hard-mode/./src/content.js"],"sourcesContent":["import{\r\n\tExtensionEventManager\r\n} from \"./ExtensionEventManager.js\"\r\n\r\nimport{\r\n\tWordBank\r\n} from \"./WordBank.js\";\r\n\r\n/**\r\n * Abstract class for all challenges\r\n * @abstract\r\n */\r\nexport class Challenge{\r\n\t/** @type {WordBank | null} */\r\n\tremainingChoices = null;\r\n\t/**\r\n\t * Instantiates a new Challenge\r\n\t * @param {HTMLElement} challengeDiv - Challenge div\r\n\t * @param {ExtensionEventManager} eventManager - Event manager\r\n\t * @throws {Error} If challengeDiv is not found\r\n\t */\r\n\tconstructor(challengeDiv, eventManager){\r\n\t\t/** @type {HTMLElement} */\r\n\t\tthis.challengeDiv = challengeDiv;\r\n\r\n\t\t/** @type {String} */\r\n\t\tthis.challengeType = challengeDiv.getAttribute(\"data-test\").replace(\"challenge challenge-\", \"\");\r\n\r\n\t\t/** @type {String} */\r\n\t\tthis.challengeId = this.challengeType + \"-\" + Date.now();\r\n\r\n\t\t/** @type {ExtensionEventManager} */\r\n\t\tthis.eventManager = eventManager;\r\n\r\n\t\t/** @type {Object} */\r\n\t\tthis.elements = this.extractElements();\r\n\r\n\t\t/** @type {WordBank} */\r\n\t\tthis.wordBank = new WordBank(this.challengeDiv.querySelector(\"div[data-test='word-bank']\"));\r\n\r\n\t\t/** @type {WordBank} */\r\n\t\tthis.remainingChoices = new WordBank(this.challengeDiv.querySelector(\"div[data-test='word-bank']\"));\r\n\r\n\t\tconsole.debug(this.elements);\r\n\t\tconsole.debug(this.wordBank);\r\n\t\tthis.eventManager.registerChallenge(this.challengeId, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Cleans up input text\r\n\t * @returns {Array} Array of words\r\n\t */\r\n\tcleanInputText(){\r\n\t\tconst inputField = this.elements.inputField;\r\n\t\tlet text = inputField.value;\r\n\r\n\t\tif(text.length === 0){\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tinputField.value = text.slice(0, -1);\r\n\r\n\t\tlet words = inputField.value.trim().split(/\\s+/);\r\n\r\n\t\tif(text.endsWith(\" \") && words.length > 0){\r\n\t\t\twords.pop();\r\n\t\t}\r\n\t\treturn words;\r\n\t}\r\n\r\n\t/**\r\n\t * Cleans up the challenge\r\n\t */\r\n\tcleanup(){\r\n\t\tthis.eventManager.unregisterChallenge(this.challengeId);\r\n\t\tif(this.elements?.inputField){\r\n\t\t\tthis.elements.inputField.remove();\r\n\t\t\tthis.elements.inputField = null;\r\n\t\t\tthis.elements.wordBank.style.display = \"flex\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Extracts challenge-specific elements\r\n\t * @returns {{question: (string), submitButton: HTMLButtonElement, inputField: HTMLTextAreaElement, wordBank: HTMLElement}} Object containing challenge-specific elements\r\n\t */\r\n\textractElements(){\r\n\t\t// noinspection JSValidateTypes\r\n\t\treturn {\r\n\t\t\tquestion: this.challengeDiv.querySelector(\"h1[data-test='challenge-header']\")?.textContent.trim() || \"\",\r\n\t\t\tsubmitButton: document.querySelector('button[data-test=\"player-next\"]'),\r\n\t\t\tinputField: null,\r\n\t\t\twordBank: this.challengeDiv.querySelector(\"div[data-test='word-bank']\")\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Enforces typing by injecting a textarea element\r\n\t */\r\n\tenforceTyping(){\r\n\t\tif(this.wordBank.wordMap.size > 0){\r\n\t\t\tconsole.debug(`Enforcing typing for ${this.challengeType}`);\r\n\t\t\tthis.injectTypingInput();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Handles backspace key event\r\n\t * @abstract\r\n\t */\r\n\thandleBackspace(){\r\n\t\tthrow new Error(\"Method not implemented\");\r\n\t}\r\n\r\n\t/**\r\n\t * Handles space key event\r\n\t */\r\n\thandleSpace(){\r\n\t\tlet userInput = this.elements.inputField.value.trim().split(\" \").pop().toLowerCase();\r\n\r\n\t\tif(!userInput)\r\n\t\t\treturn;\r\n\r\n\t\tif(\r\n\t\t\tthis.remainingChoices.wordMap.has(userInput) &&\r\n\t\t\tthis.remainingChoices.wordMap.get(userInput).length > 0\r\n\t\t){\r\n\t\t\tconsole.debug(`Selected ${userInput}`);\r\n\r\n\t\t\tthis.remainingChoices.selectWord(userInput).click();\r\n\r\n\t\t\tthis.elements.inputField.value += \" \";\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconsole.warn(`Word ${userInput} not found in choices ${Array.from(this.remainingChoices.wordMap.keys())}`);\r\n\r\n\t\t\tthis.elements.inputField.style.border = \"2px solid red\";\r\n\t\t\tthis.elements.inputField.style.animation = \"shake 0.3s\";\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.elements.inputField.style.border = \"2px solid rgb(var(--color-swan))\";\r\n\t\t\t\tthis.elements.inputField.style.animation = \"\";\r\n\t\t\t}, 300);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Handles key events\r\n\t * @param {KeyboardEvent} event - Keyboard event\r\n\t */\r\n\thandleKeyEvent(event){\r\n\t\tconst key = event.key;\r\n\r\n\t\tif(key === \" \"){\r\n\t\t\tthis.handleSpace();\r\n\t\t}\r\n\t\telse if(key === \"Backspace\"){\r\n\t\t\tthis.handleBackspace();\r\n\t\t}\r\n\t\telse if(key === \"Enter\"){\r\n\t\t\tlet userInput = this.elements.inputField.value.trim().split(\" \").pop().toLowerCase()\r\n\r\n\t\t\tif(\r\n\t\t\t\tthis.remainingChoices.wordMap.has(userInput) &&\r\n\t\t\t\tthis.remainingChoices.wordMap.get(userInput).length > 0\r\n\t\t\t){\r\n\t\t\t\tconsole.debug(`Selected ${userInput}`);\r\n\r\n\t\t\t\tthis.remainingChoices.selectWord(userInput).click();\r\n\t\t\t}\r\n\t\t\tthis.handleSubmit();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Injects a textarea element for typing input\r\n\t * @throws {Error} FIXME If word bank is not found\r\n\t */\r\n\tinjectTypingInput(){\r\n\t\tif(!this.elements.wordBank || !this.wordBank)\r\n\t\t\treturn console.error(\"Word bank not found\");\r\n\r\n\t\tthis.elements.wordBank.style.display = \"none\";\r\n\r\n\t\tthis.elements.inputField = document.createElement(\"textarea\");\r\n\t\tthis.elements.inputField.dataset.extension = \"true\";\r\n\t\tthis.elements.inputField.dataset.challengeId = this.challengeId;\r\n\t\tthis.elements.inputField.setAttribute(\"autocapitalize\", \"off\");\r\n\t\tthis.elements.inputField.setAttribute(\"autocomplete\", \"off\");\r\n\t\tthis.elements.inputField.setAttribute(\"spellcheck\", \"false\");\r\n\t\tthis.elements.inputField.setAttribute(\"placeholder\", \"Type here...\");\r\n\t\tthis.elements.inputField.setAttribute(\"data-extension\", \"true\");\r\n\t\tthis.elements.inputField.style.cssText = `\r\n\t\t-webkit-text-size-adjust: 100%;\r\n\t\t--viewport-height: 100dvh;\r\n\t\t--web-ui_button-border-radius: 16px;\r\n\t\t--rtl-sign: 1;\r\n\t\t--text-pageTitle-casing-large: none;\r\n\t\t--text-pageTitle-letter-spacing-large: 0;\r\n\t\t--text-pageTitle-line-height-large: 2.75rem;\r\n\t\t--text-pageTitle-size-large: 2.5rem;\r\n\t\t--text-pageTitle-weight-large: 700;\r\n\t\t--text-pageTitle-casing-small: none;\r\n\t\t--text-pageTitle-letter-spacing-small: 0;\r\n\t\t--text-pageTitle-line-height-small: 2.25rem;\r\n\t\t--text-pageTitle-size-small: 2rem;\r\n\t\t--text-pageTitle-weight-small: 700;\r\n\t\t--text-heading-casing-large: none;\r\n\t\t--text-heading-letter-spacing-large: 0;\r\n\t\t--text-heading-line-height-large: 2rem;\r\n\t\t--text-heading-size-large: 1.75rem;\r\n\t\t--text-heading-weight-large: 700;\r\n\t\t--text-heading-casing-medium: none;\r\n\t\t--text-heading-letter-spacing-medium: 0;\r\n\t\t--text-heading-line-height-medium: 2rem;\r\n\t\t--text-heading-size-medium: 1.5rem;\r\n\t\t--text-heading-weight-medium: 700;\r\n\t\t--text-heading-casing-small: none;\r\n\t\t--text-heading-letter-spacing-small: 0;\r\n\t\t--text-heading-line-height-small: 1.5rem;\r\n\t\t--text-heading-size-small: 1.25rem;\r\n\t\t--text-heading-weight-small: 700;\r\n\t\t--text-heading-casing-xsmall: none;\r\n\t\t--text-heading-letter-spacing-xsmall: 0;\r\n\t\t--text-heading-line-height-xsmall: 1.25rem;\r\n\t\t--text-heading-size-xsmall: 1rem;\r\n\t\t--text-heading-weight-xsmall: 700;\r\n\t\t--text-body-casing: none;\r\n\t\t--text-body-letter-spacing: 0;\r\n\t\t--text-body-line-height: 1.75rem;\r\n\t\t--text-body-size: 1.25rem;\r\n\t\t--text-body-weight: 500;\r\n\t\t--text-body-weight-bold: 700;\r\n\t\t--text-body-casing-spacious: none;\r\n\t\t--text-body-letter-spacing-spacious: 0;\r\n\t\t--text-body-line-height-spacious: 2rem;\r\n\t\t--text-body-size-spacious: 1.25rem;\r\n\t\t--text-body-weight-spacious: 500;\r\n\t\t--text-body-weight-spacious-bold: 700;\r\n\t\t--text-caption-casing: none;\r\n\t\t--text-caption-letter-spacing: 0;\r\n\t\t--text-caption-line-height: 1.5rem;\r\n\t\t--text-caption-size: 1rem;\r\n\t\t--text-caption-weight: 500;\r\n\t\t--text-caption-weight-bold: 700;\r\n\t\t--text-label-casing-large: uppercase;\r\n\t\t--text-label-letter-spacing-large: 0.04em;\r\n\t\t--text-label-line-height-large: 1.5rem;\r\n\t\t--text-label-size-large: 1.5rem;\r\n\t\t--text-label-weight-large: 700;\r\n\t\t--text-label-casing-medium: uppercase;\r\n\t\t--text-label-letter-spacing-medium: 0.04em;\r\n\t\t--text-label-line-height-medium: 1rem;\r\n\t\t--text-label-size-medium: 1rem;\r\n\t\t--text-label-weight-medium: 700;\r\n\t\t--color-snow: 19, 31, 36;\r\n\t\t--color-snow-always-light: 255, 255, 255;\r\n\t\t--color-snow-always-dark: 19, 31, 36;\r\n\t\t--color-polar: 32, 47, 54;\r\n\t\t--color-swan: 55, 70, 79;\r\n\t\t--color-swan-always-light: 229, 229, 229;\r\n\t\t--color-swan-always-dark: 55, 70, 79;\r\n\t\t--color-hare: 82, 101, 109;\r\n\t\t--color-hare-always-light: 175, 175, 175;\r\n\t\t--color-wolf: 220, 230, 236;\r\n\t\t--color-eel: 241, 247, 251;\r\n\t\t--color-squid: 235, 227, 227;\r\n\t\t--color-walking-fish: 32, 47, 54;\r\n\t\t--color-flamingo: 148, 81, 81;\r\n\t\t--color-pig: 245, 164, 164;\r\n\t\t--color-crab: 255, 120, 120;\r\n\t\t--color-cardinal: 238, 85, 85;\r\n\t\t--color-fire-ant: 216, 72, 72;\r\n\t\t--color-canary: 32, 47, 54;\r\n\t\t--color-duck: 251, 229, 109;\r\n\t\t--color-bee: 255, 199, 0;\r\n\t\t--color-bee-always-dark: 255, 199, 0;\r\n\t\t--color-lion: 255, 177, 0;\r\n\t\t--color-fox: 255, 171, 51;\r\n\t\t--color-cheetah: 32, 47, 54;\r\n\t\t--color-monkey: 229, 162, 89;\r\n\t\t--color-camel: 231, 166, 1;\r\n\t\t--color-guinea-pig: 215, 148, 51;\r\n\t\t--color-grizzly: 187, 113, 73;\r\n\t\t--color-sea-sponge: 32, 47, 54;\r\n\t\t--color-turtle: 95, 132, 40;\r\n\t\t--color-owl: 147, 211, 51;\r\n\t\t--color-tree-frog: 121, 185, 51;\r\n\t\t--color-peacock: 0, 205, 156;\r\n\t\t--color-iguana: 32, 47, 54;\r\n\t\t--color-anchovy: 210, 228, 232;\r\n\t\t--color-beluga: 187, 242, 255;\r\n\t\t--color-moon-jelly: 122, 240, 242;\r\n\t\t--color-blue-jay: 63, 133, 167;\r\n\t\t--color-macaw: 73, 192, 248;\r\n\t\t--color-whale: 24, 153, 214;\r\n\t\t--color-humpback: 43, 112, 201;\r\n\t\t--color-narwhal: 20, 83, 163;\r\n\t\t--color-manta-ray: 4, 44, 96;\r\n\t\t--color-starfish: 255, 134, 208;\r\n\t\t--color-beetle: 206, 130, 255;\r\n\t\t--color-betta: 144, 105, 205;\r\n\t\t--color-butterfly: 111, 78, 161;\r\n\t\t--color-dragon: 204, 52, 141;\r\n\t\t--color-starling: 92, 108, 252;\r\n\t\t--color-martin: 71, 85, 223;\r\n\t\t--color-grackle: 167, 160, 255;\r\n\t\t--color-honeycreeper: 193, 187, 255;\r\n\t\t--color-deep-starling: 34, 33, 81;\r\n\t\t--color-deep-martin: 16, 15, 62;\r\n\t\t--color-legendary-foreground: 140, 65, 3;\r\n\t\t--color-stardust: 199, 255, 254;\r\n\t\t--color-cosmos: 60, 77, 255;\r\n\t\t--color-nebula: 63, 34, 236;\r\n\t\t--color-nova: 207, 23, 200;\r\n\t\t--color-gamma: 38, 246, 99;\r\n\t\t--color-starlight: 38, 138, 255;\r\n\t\t--color-quasar: 252, 85, 255;\r\n\t\t--color-celestia: 255, 255, 255;\r\n\t\t--color-eclipse: 0, 4, 55;\r\n\t\t--color-black: 0, 0, 0;\r\n\t\t--color-aqua: 43, 164, 176;\r\n\t\t--color-aqua-always-light: 56, 238, 255;\r\n\t\t--color-ocean: 56, 238, 255;\r\n\t\t--color-seafoam: 30, 89, 97;\r\n\t\t--color-ice: 23, 52, 58;\r\n\t\t--color-max-shadow: 20, 208, 225;\r\n\t\t--color-black-white: 255, 255, 255;\r\n\t\t--color-diamond-stat: 86, 219, 226;\r\n\t\t--color-mask-green: 144, 220, 72;\r\n\t\t--color-pearl-stat: 255, 170, 222;\r\n\t\t--color-snow-dark-swan: 55, 70, 79;\r\n\t\t--color-black-text: 241, 247, 251;\r\n\t\t--color-blue-space: 11, 62, 113;\r\n\t\t--color-juicy-blue-space: 10, 74, 130;\r\n\t\t--color-juicy-blue-space-light: 35, 83, 144;\r\n\t\t--color-gold: 250, 169, 25;\r\n\t\t--color-gray-text: 220, 230, 236;\r\n\t\t--color-orange: 255, 157, 0;\r\n\t\t--color-diamond-highlight: 231, 251, 251;\r\n\t\t--color-diamond: 56, 208, 208;\r\n\t\t--color-banana: 255, 176, 32;\r\n\t\t--color-cloud: 207, 207, 207;\r\n\t\t--color-cloud-light: 221, 221, 221;\r\n\t\t--color-cloud-lightest: 240, 240, 240;\r\n\t\t--color-kiwi: 122, 199, 12;\r\n\t\t--color-kiwi-dark: 93, 151, 9;\r\n\t\t--color-kiwi-light: 142, 224, 0;\r\n\t\t--color-facebook: 59, 89, 152;\r\n\t\t--color-facebook-dark: 45, 67, 115;\r\n\t\t--color-google: 66, 133, 244;\r\n\t\t--color-twitter: 29, 161, 242;\r\n\t\t--color-hv-light-peach: 241, 218, 179;\r\n\t\t--color-hv-peach: 219, 186, 131;\r\n\t\t--color-hv-light-orange: 255, 177, 64;\r\n\t\t--color-hv-orange: 204, 121, 0;\r\n\t\t--color-hv-brown: 140, 90, 17;\r\n\t\t--color-streak-panel-extended-background: 205, 121, 0;\r\n\t\t--color-streak-panel-friend-background: 255, 95, 0;\r\n\t\t--color-streak-panel-frozen-background: 43, 112, 201;\r\n\t\t--color-streak-panel-frozen-flair-background: 73, 192, 248;\r\n\t\t--color-streak-panel-frozen-subtitle: 255, 255, 255;\r\n\t\t--color-streak-panel-frozen-text: 255, 255, 255;\r\n\t\t--color-streak-panel-frozen-topbar-text: 255, 255, 255;\r\n\t\t--color-streak-panel-streak-society-background: 215, 148, 51;\r\n\t\t--color-streak-panel-streak-society-background-always-dark: 215, 148, 51;\r\n\t\t--color-streak-panel-streak-society-text: 255, 255, 255;\r\n\t\t--color-streak-panel-unextended-heading-text: 82, 101, 109;\r\n\t\t--color-streak-panel-unextended-heading-background: 32, 47, 54;\r\n\t\t--color-streak-panel-unextended-topbar-text: 255, 255, 255;\r\n\t\t--color-streak-panel-milestone-gradient-start: 255, 147, 58;\r\n\t\t--color-streak-panel-milestone-gradient-end: 255, 200, 0;\r\n\t\t--color-streak-society-dark-orange: 255, 151, 1;\r\n\t\t--color-streak-society-light-orange: 255, 179, 1;\r\n\t\t--color-friends-quest-own-incomplete: 111, 139, 157;\r\n\t\t--color-friends-quest-friend-incomplete: 79, 100, 113;\r\n\t\t--color-black-text-always-light: 60, 60, 60;\r\n\t\t--color-cardinal-always-light: 255, 75, 75;\r\n\t\t--color-cowbird: 174, 104, 2;\r\n\t\t--color-eel-always-light: 75, 75, 75;\r\n\t\t--color-fox-always-light: 255, 150, 0;\r\n\t\t--color-fire-ant-always-light: 234, 43, 43;\r\n\t\t--color-grizzly-lite: 220, 143, 71;\r\n\t\t--color-guinea-pig-always-light: 205, 121, 0;\r\n\t\t--color-iguana-always-light: 221, 244, 255;\r\n\t\t--color-macaw-always-light: 28, 176, 246;\r\n\t\t--color-owl-always-light: 88, 204, 2;\r\n\t\t--color-polar-always-light: 247, 247, 247;\r\n\t\t--color-sea-sponge-always-light: 215, 255, 184;\r\n\t\t--color-tree-frog-always-light: 88, 167, 0;\r\n\t\t--color-turtle-always-light: 165, 237, 110;\r\n\t\t--color-walking-fish-always-light: 255, 223, 224;\r\n\t\t--color-wolf-always-light: 119, 119, 119;\r\n\t\t--color-cardinal-always-dark: 238, 85, 85;\r\n\t\t--color-eel-always-dark: 241, 247, 251;\r\n\t\t--color-hare-always-dark: 82, 101, 109;\r\n\t\t--color-macaw-always-dark: 73, 192, 248;\r\n\t\t--color-owl-always-dark: 147, 211, 51;\r\n\t\t--color-polar-always-dark: 32, 47, 54;\r\n\t\t--color-wolf-always-dark: 220, 230, 236;\r\n\t\t--color-rookie: 0, 175, 133;\r\n\t\t--color-explorer: 255, 100, 191;\r\n\t\t--color-traveler: 255, 145, 83;\r\n\t\t--color-trailblazer: 154, 143, 232;\r\n\t\t--color-adventurer: 96, 12, 199;\r\n\t\t--color-discoverer: 111, 44, 57;\r\n\t\t--color-daredevil: 46, 83, 138;\r\n\t\t--color-navigator: 9, 47, 119;\r\n\t\t--color-champion: 255, 110, 53;\r\n\t\t--color-daily_refresh: 0, 148, 255;\r\n\t\t--color-dark-mode-locked-path-section-text-color: 82, 101, 109;\r\n\t\t--color-rookie-progress-bar: 0, 198, 150;\r\n\t\t--color-explorer-progress-bar: 255, 138, 207;\r\n\t\t--color-traveler-progress-bar: 255, 167, 106;\r\n\t\t--color-trailblazer-progress-bar: 169, 157, 254;\r\n\t\t--color-adventurer-progress-bar: 122, 13, 199;\r\n\t\t--color-discoverer-progress-bar: 131, 50, 65;\r\n\t\t--color-daredevil-progress-bar: 54, 98, 165;\r\n\t\t--color-navigator-progress-bar: 12, 57, 141;\r\n\t\t--color-champion-progress-bar: 255, 129, 80;\r\n\t\t--color-daily_refresh-progress-bar: 28, 160, 255;\r\n\t\t--color-course-complete-cta: 120, 219, 224;\r\n\t\t--color-course-complete-cta-border: 94, 201, 204;\r\n\t\t--color-bea-secondary: 24, 153, 214;\r\n\t\t--color-eddy-secondary: 234, 43, 43;\r\n\t\t--color-gilded-secondary: 231, 166, 1;\r\n\t\t--color-lily-secondary: 165, 104, 204;\r\n\t\t--color-vikram-secondary: 163, 42, 113;\r\n\t\t--color-zari-secondary: 204, 107, 166;\r\n\t\t--color-oscar-secondary: 0, 164, 125;\r\n\t\t--color-falstaff-secondary: 150, 90, 58;\r\n\t\t--color-bea-radio: 20, 123, 172;\r\n\t\t--color-duo-radio: 62, 143, 1;\r\n\t\t--color-eddy-radio: 179, 53, 53;\r\n\t\t--color-falstaff-radio: 131, 79, 51;\r\n\t\t--color-lin-lucy-radio: 179, 105, 0;\r\n\t\t--color-lily-radio: 144, 91, 179;\r\n\t\t--color-vikram-radio: 143, 36, 99;\r\n\t\t--color-zari-radio: 179, 94, 146;\r\n\t\t--color-oscar-radio: 0, 144, 109;\r\n\t\t--color-bea-junior-shine: 67, 190, 248;\r\n\t\t--color-duo-shine: 114, 214, 39;\r\n\t\t--color-eddy-shine: 255, 105, 105;\r\n\t\t--color-falstaff-shine: 227, 165, 108;\r\n\t\t--color-lily-shine: 214, 150, 255;\r\n\t\t--color-lin-lucy-shine: 255, 168, 44;\r\n\t\t--color-oscar-shine: 63, 217, 181;\r\n\t\t--color-vikram-shine: 214, 90, 162;\r\n\t\t--color-zari-shine: 255, 158, 217;\r\n\t\t--color-super-background-secondary: 26, 30, 76;\r\n\t\t--color-super-gradient-background: 12, 47, 113;\r\n\t\t--color-super-gradient-top-halo: 12, 76, 70;\r\n\t\t--color-super-gradient-bottom-halo: 76, 29, 115;\r\n\t\t--color-gold-shine: 255, 231, 0;\r\n\t\t--color-legendary-dark-background: 24, 24, 24;\r\n\t\t--color-roseate: 223, 75, 162;\r\n\t\t--color-rosefinch: 180, 28, 117;\r\n\t\t--color-bluebird: 3, 144, 211;\r\n\t\t--color-cotinga: 121, 58, 227;\r\n\t\t--color-sabrewing: 165, 112, 255;\r\n\t\t--color-blueberry: 17, 82, 167;\r\n\t\t--color-ether: 60, 89, 141;\r\n\t\t--color-diamond-tournament-purple: 161, 161, 238;\r\n\t\t--color-diamond-tournament-reaction: 118, 163, 231;\r\n\t\t--color-yir-page0: 221, 244, 255;\r\n\t\t--color-yir-page1: 227, 255, 235;\r\n\t\t--color-yir-page1-shadow: 19, 31, 36;\r\n\t\t--color-yir-page3-shadow: 187, 172, 252;\r\n\t\t--color-yir-page4-shadow: 143, 219, 255;\r\n\t\t--color-yir-page5-shadow: 255, 183, 80;\r\n\t\t--color-super-gradient-green-variant1: 38, 255, 85;\r\n\t\t--color-super-gradient-blue-variant1: 38, 139, 255;\r\n\t\t--color-super-gradient-pink-variant1: 252, 85, 255;\r\n\t\t--color-super-gradient-purple-variant1: 17, 34, 181;\r\n\t\t--color-unknown-001e2d: 0, 30, 45;\r\n\t\t--color-unknown-0047a4: 0, 71, 164;\r\n\t\t--color-unknown-0087d0: 0, 135, 208;\r\n\t\t--color-unknown-00aff9: 0, 175, 249;\r\n\t\t--color-unknown-013047: 1, 48, 71;\r\n\t\t--color-unknown-048fd1: 4, 143, 209;\r\n\t\t--color-unknown-0e0f10: 14, 15, 16;\r\n\t\t--color-unknown-0e3d79: 14, 61, 121;\r\n\t\t--color-unknown-172071: 23, 32, 113;\r\n\t\t--color-unknown-280378: 40, 3, 120;\r\n\t\t--color-unknown-3ebbf6: 62, 187, 246;\r\n\t\t--color-unknown-655ebb: 101, 94, 187;\r\n\t\t--color-unknown-696cee: 105, 108, 238;\r\n\t\t--color-unknown-7c0000: 124, 0, 0;\r\n\t\t--color-unknown-89e219: 137, 226, 25;\r\n\t\t--color-unknown-935051: 147, 80, 81;\r\n\t\t--color-unknown-959595: 149, 149, 149;\r\n\t\t--color-unknown-a2a2a2: 162, 162, 162;\r\n\t\t--color-unknown-a3dbeb: 163, 219, 235;\r\n\t\t--color-unknown-a4dffb: 164, 223, 251;\r\n\t\t--color-unknown-aaa: 170, 170, 170;\r\n\t\t--color-unknown-d087ff: 208, 135, 255;\r\n\t\t--color-unknown-d9d9d9: 217, 217, 217;\r\n\t\t--color-unknown-ddd: 221, 221, 221;\r\n\t\t--color-unknown-de8029: 222, 128, 41;\r\n\t\t--color-unknown-e3e3e3: 227, 227, 227;\r\n\t\t--color-unknown-e4ffff: 228, 255, 255;\r\n\t\t--color-unknown-ed8c01: 237, 140, 1;\r\n\t\t--color-unknown-f3484e: 243, 72, 78;\r\n\t\t--color-unknown-f4fafe: 244, 250, 254;\r\n\t\t--color-unknown-fbdec5: 251, 222, 197;\r\n\t\t--color-unknown-ffc700: 255, 199, 0;\r\n\t\t--color-unknown-fff2aa: 255, 242, 170;\r\n\t\t--color-unknown-fffbef: 255, 251, 239;\r\n\t\t--app-offset: 0px;\r\n\t\t-webkit-font-smoothing: antialiased;\r\n\t\tdirection: ltr;\r\n\t\t-webkit-locale: \"es\";\r\n\t\tfont-size: 100%;\r\n\t\tmargin: 0;\r\n\t\toverflow: auto;\r\n\t\t-webkit-tap-highlight-color: transparent;\r\n\t\tbox-sizing: inherit;\r\n\t\tfont-family: din-round,sans-serif;\r\n\t\toutline: none;\r\n\t\tuser-select: auto;\r\n\t\tbackground: rgb(var(--color-snow));\r\n\t\tborder: 2px solid rgb(var(--color-swan));\r\n\t\tcolor: rgb(var(--color-black-text));\r\n\t\ttext-align: initial;\r\n\t\tline-height: 24px;\r\n\t\tbackground-color: rgb(var(--color-polar));\r\n\t\tborder-color: rgb(var(--color-swan));\r\n\t\tborder-radius: 10px;\r\n\t\tpadding: 10px 12px;\r\n\t\tappearance: none;\r\n\t\twidth: 100%;\r\n\t\tflex-grow: 1;\r\n\t\tresize: none;\r\n\t\t`\r\n\r\n\t\tthis.elements.wordBank.parentNode.insertBefore(this.elements.inputField, this.elements.wordBank);\r\n\r\n\t\tthis.elements.inputField.addEventListener('input', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t});\r\n\r\n\t\tthis.elements.inputField.addEventListener('keydown', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t// Handle special keys through our system\r\n\t\t\tif([' ', 'Backspace', 'Enter'].includes(e.key)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.handleKeyEvent(e);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.elements.inputField.addEventListener(\"blur\", () => setTimeout(() => this.elements.inputField.focus(), 50));\r\n\r\n\t\tthis.elements.inputField.focus();\r\n\t}\r\n\r\n\t/**\r\n\t * Submits the challenge\r\n\t */\r\n\thandleSubmit() {\r\n\t\tthis.elements.submitButton.click();\r\n\t}\r\n}","import {\r\n\tChallenge\r\n} from \"./Challenge.js\";\r\n\r\n/**\r\n * Factory class for creating challenges\r\n */\r\nexport class ChallengeFactory{\r\n\tstatic registry = new Map();\r\n\r\n\t/**\r\n\t * Registers a challenge class\r\n\t * @param {String} challengeType\r\n\t * @param {Class} challengeClass\r\n\t * @throws {Error} If challengeType is already registered\r\n\t * @throws {Error} If challengeClass is not a subclass of Challenge\r\n\t */\r\n\tstatic register(challengeType, challengeClass){\r\n\t\tif(!(challengeClass.prototype instanceof Challenge)){\r\n\t\t\tthrow new Error(`Class ${challengeClass.name} must extend Challenge`);\r\n\t\t}\r\n\t\tChallengeFactory.registry.set(challengeType, challengeClass);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an instance of a Challenge\r\n\t * @param {String} challengeType\r\n\t * @param {HTMLElement} challengeDiv\r\n\t * @param {ExtensionEventManager} eventManager\r\n\t * @returns {Challenge}\r\n\t * @throws {Error} If challengeType is not registered\r\n\t */\r\n\tstatic create(challengeType, challengeDiv, eventManager){\r\n\t\tconst ChallengeClass = ChallengeFactory.registry.get(challengeType);\r\n\t\tif(!ChallengeClass) {\r\n\t\t\tthrow new Error(`Challenge type ${challengeType} not found`);\r\n\t\t}\r\n\t\treturn new ChallengeClass(challengeDiv, eventManager);\r\n\t}\r\n}","import{\r\n\tChallenge\r\n} from \"./Challenge.js\";\r\n\r\nimport{\r\n\tExtensionEventManager\r\n} from \"./ExtensionEventManager.js\";\r\n\r\n/**\r\n * Challenge type: tapComplete\r\n * @extends Challenge\r\n */\r\nexport class ChallengeTapComplete extends Challenge{\r\n\t/**\r\n\t * Instantiates a new ChallengeTranslate\r\n\t * @param {HTMLElement} challengeDiv - Challenge div\r\n\t * @param {ExtensionEventManager} eventManager - Event manager\r\n\t * @throws {Error} If challengeDiv is not found\r\n\t */\r\n\tconstructor(challengeDiv, eventManager){\r\n\t\tsuper(challengeDiv, eventManager);\r\n\t}\r\n\r\n\t/**\r\n\t * Handles backspace key event\r\n\t */\r\n\thandleBackspace() {\r\n\t\tlet removedWord = null;\r\n\r\n\t\tlet words = this.cleanInputText()\r\n\r\n\t\tif(words.length === 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet removedWordIndex = -1;\r\n\t\tlet text = this.elements.inputField.value;\r\n\r\n\t\t// Find the removed word and its original position before deletion\r\n\t\tfor (const word of this.wordBank.wordMap.keys()) {\r\n\t\t\tif (\r\n\t\t\t\t!words.includes(word) &&\r\n\t\t\t\tthis.remainingChoices.wordMap.get(word).length !==\r\n\t\t\t\tthis.wordBank.wordMap.get(word).length\r\n\t\t\t) {\r\n\t\t\t\tremovedWord = word;\r\n\t\t\t\tremovedWordIndex = text.trim().split(/\\s+/).indexOf(word); // Get the original index before deletion\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (removedWord && removedWordIndex !== -1) {\r\n\t\t\tconsole.debug(`Re-enabling ${removedWord} at index ${removedWordIndex}`);\r\n\r\n\t\t\tconst returnedButton = this.remainingChoices.returnLastUsed(removedWord);\r\n\t\t\tconst dataTestValue = returnedButton.getAttribute(\"data-test\");\r\n\r\n\t\t\t// Get all buttons matching the word\r\n\t\t\tconst buttons = [...document.querySelectorAll(`button[data-test='${dataTestValue}']`)]\r\n\t\t\t\t.filter(btn =>\r\n\t\t\t\t\tbtn.getAttribute(\"aria-disabled\") === \"false\" &&\r\n\t\t\t\t\tbtn.querySelector(\"[data-test='challenge-tap-token-text']\")?.textContent.trim() === removedWord\r\n\t\t\t\t);\r\n\r\n\t\t\tconsole.debug(buttons);\r\n\r\n\t\t\t// Select the button at the same position as the removed word\r\n\t\t\tconst targetButton = buttons[removedWordIndex] || buttons.at(-1); // Fallback to last if out of range\r\n\r\n\t\t\tif (targetButton) {\r\n\t\t\t\ttargetButton.click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import{\r\n\tChallenge\r\n} from \"./Challenge.js\";\r\n\r\nimport{\r\n\tExtensionEventManager\r\n} from \"./ExtensionEventManager.js\"\r\n\r\n/**\r\n * Challenge type: translate\r\n * @extends Challenge\r\n */\r\nexport class ChallengeTranslate extends Challenge{\r\n\t/**\r\n\t * Instantiates a new ChallengeTranslate\r\n\t * @param {HTMLElement} challengeDiv - Challenge div\r\n\t * @param {ExtensionEventManager} eventManager - Event manager\r\n\t * @throws {Error} If challengeDiv is not found\r\n\t */\r\n\tconstructor(challengeDiv, eventManager){\r\n\t\tsuper(challengeDiv, eventManager);\r\n\t}\r\n\r\n\t/**\r\n\t * Handles backspace key event\r\n\t */\r\n\thandleBackspace(){\r\n\t\tlet removedWord = null;\r\n\r\n\t\tlet words = this.cleanInputText()\r\n\r\n\t\tif(words.length === 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor(const word of this.wordBank.wordMap.keys()){\r\n\t\t\tif (\r\n\t\t\t\t!(words.includes(word)) &&\r\n\t\t\t\tthis.remainingChoices.wordMap.get(word).length !==\r\n\t\t\t\tthis.wordBank.wordMap.get(word).length\r\n\t\t\t){\r\n\t\t\t\tremovedWord = word;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(removedWord){\r\n\t\t\tconsole.debug(`Re-enabling ${removedWord}`);\r\n\r\n\t\t\tconst returnedButton = this.remainingChoices.returnLastUsed(removedWord);\r\n\t\t\t// Click the only enabled button to make the word available again\r\n\t\t\tconst dataTestValue = returnedButton.getAttribute(\"data-test\");\r\n\t\t\tconst activeButton = [...document.querySelectorAll(`button[data-test='${dataTestValue}']`)]\r\n\t\t\t\t.find(btn => btn.getAttribute(\"aria-disabled\") === \"false\");\r\n\r\n\t\t\tif(activeButton){\r\n\t\t\t\tactiveButton.click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","export class ExtensionEventManager{\r\n\tconstructor() {\r\n\t\tthis.activeChallenges = new Map();\r\n\t}\r\n\r\n\tinitGlobalKeyCapture(){\r\n\t\tdocument.addEventListener(\"keydown\", (event) => {\r\n\t\t\tconst textarea = event.target.closest(\"textarea[data-extension='true']\");\r\n\t\t\tif(!textarea){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.stopImmediatePropagation();\r\n\r\n\t\t\tif([' ', 'Backspace', 'Enter'].includes(event.key)) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tconst challengeId = textarea.dataset.challengeId;\r\n\t\t\t\tconst challenge = this.activeChallenges.get(challengeId);\r\n\t\t\t\tchallenge?.handleKeyEvent(event);\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tdocument.addEventListener('keypress', (e) => {\r\n\t\t\tif(e.target.closest(\"textarea[data-extension='true']\")) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\tif(e.target.closest(\"textarea[data-extension='true']\")) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t}\r\n\t\t}, true);\r\n\t}\r\n\r\n\tregisterChallenge(challengeId, challengeInstance){\r\n\t\tthis.activeChallenges.set(challengeId, challengeInstance);\r\n\t}\r\n\r\n\tunregisterChallenge(challengeId){\r\n\t\tthis.activeChallenges.delete(challengeId);\r\n\t}\r\n}","export class WordBank {\r\n\tconstructor(wordBankDiv) {\r\n\t\tif (!wordBankDiv) {\r\n\t\t\tthrow new Error(\"Word bank div not found\");\r\n\t\t}\r\n\r\n\t\t/** @type {HTMLElement} */\r\n\t\tthis.wordBankDiv = wordBankDiv;\r\n\t\t// Map of available word buttons: word → array of buttons\r\n\t\tthis.wordMap = this.extractWords();\r\n\t\t// Map to track used word buttons: word → array of buttons (LIFO order)\r\n\t\tthis.usedWordButtons = new Map();\r\n\t}\r\n\r\n\t/**\r\n\t * Extracts word choices from the word bank container.\r\n\t * @returns {Map<string, HTMLButtonElement[]>} A map where the key is the lowercase word,\r\n\t * and the value is an array of matching button elements.\r\n\t */\r\n\textractWords() {\r\n\t\tconst wordButtons = [\r\n\t\t\t...this.wordBankDiv.querySelectorAll(\r\n\t\t\t\t\"button[data-test*='challenge-tap-token']\"\r\n\t\t\t)\r\n\t\t];\r\n\r\n\t\treturn wordButtons.reduce((map, btn) => {\r\n\t\t\tconst word = btn\r\n\t\t\t\t.querySelector(\"[data-test='challenge-tap-token-text']\")\r\n\t\t\t\t.textContent.trim()\r\n\t\t\t\t.toLowerCase();\r\n\r\n\t\t\tif (!map.has(word)) {\r\n\t\t\t\tmap.set(word, []);\r\n\t\t\t}\r\n\t\t\tmap.get(word).push(btn);\r\n\r\n\t\t\treturn map;\r\n\t\t}, new Map());\r\n\t}\r\n\r\n\t/**\r\n\t * Selects the last available occurrence of a word.\r\n\t * This method uses a LIFO (stack) pattern to track usage so that the last-used\r\n\t * button for that word can later be returned (e.g., when a user backspaces).\r\n\t *\r\n\t * @param {string} word - The word to select.\r\n\t * @returns {HTMLButtonElement|null} The button element for the selected word, or null if unavailable.\r\n\t */\r\n\tselectWord(word) {\r\n\t\tif (this.wordMap.has(word) && this.wordMap.get(word).length > 0) {\r\n\t\t\t// Remove the last available button instance.\r\n\t\t\tconst btn = this.wordMap.get(word).pop();\r\n\t\t\t// Record this button as the most-recently used.\r\n\t\t\tif (!this.usedWordButtons.has(word)) {\r\n\t\t\t\tthis.usedWordButtons.set(word, []);\r\n\t\t\t}\r\n\t\t\tthis.usedWordButtons.get(word).push(btn);\r\n\t\t\treturn btn;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the last used occurrence of a word back to the available pool.\r\n\t * This method ensures that if a word has been used multiple times,\r\n\t * the instance returned is the one that was selected last.\r\n\t *\r\n\t * @param {string} word - The word to return.\r\n\t * @returns {HTMLButtonElement|null} The returned button element, or null if none are recorded.\r\n\t */\r\n\treturnLastUsed(word) {\r\n\t\tif (\r\n\t\t\tthis.usedWordButtons.has(word) &&\r\n\t\t\tthis.usedWordButtons.get(word).length > 0\r\n\t\t) {\r\n\t\t\t// Pop the most-recently used button and return it to the available pool.\r\n\t\t\tconst btn = this.usedWordButtons.get(word).pop();\r\n\t\t\tthis.wordMap.get(word).push(btn);\r\n\t\t\treturn btn;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a word button back to the available pool.\r\n\t * This generic method can be used if the button to return is known.\r\n\t *\r\n\t * @param {string} word - The word associated with the button.\r\n\t * @param {HTMLButtonElement} wordButton - The button element to return.\r\n\t */\r\n\treturnWord(word, wordButton) {\r\n\t\tif (this.wordMap.has(word)) {\r\n\t\t\tthis.wordMap.get(word).push(wordButton);\r\n\t\t} else {\r\n\t\t\tthis.wordMap.set(word, [wordButton]);\r\n\t\t}\r\n\t}\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import{\r\n\tChallengeFactory,\r\n} from \"./ChallengeFactory.js\"\r\n\r\nimport{\r\n\tChallengeTranslate\r\n} from \"./ChallengeTranslate.js\";\r\n\r\nimport{\r\n\tChallengeTapComplete\r\n} from \"./ChallengeTapComplete.js\";\r\n\r\nimport{\r\n\tExtensionEventManager\r\n} from \"./ExtensionEventManager.js\";\r\n\r\nconst eventManager = new ExtensionEventManager();\r\neventManager.initGlobalKeyCapture();\r\n\r\nChallengeFactory.register(\"translate\", ChallengeTranslate);\r\nChallengeFactory.register(\"tapComplete\", ChallengeTapComplete);\r\n\r\nlet activeChallenge = null;\r\n\r\nfunction enforceTyping(){\r\n\tconst challengeDiv = document.querySelector(\"div[data-test^='challenge challenge-']\")\r\n\r\n\tif(activeChallenge && (!challengeDiv || challengeDiv !== activeChallenge.challengeDiv)){\r\n\t\tactiveChallenge.cleanup?.();\r\n\t\tactiveChallenge = null;\r\n\t}\r\n\r\n\tif(!challengeDiv || challengeDiv.hasAttribute(\"data-extension-processed\")) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst challengeType = challengeDiv.getAttribute(\"data-test\").replace(\"challenge challenge-\", \"\")\r\n\r\n\tif([\"listenTap\", \"completeReverseTranslation\"].includes(challengeType)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tconsole.debug(challengeType)\r\n\r\n\ttry{\r\n\t\tchallengeDiv.setAttribute(\"data-extension-processed\", \"true\");\r\n\t\tactiveChallenge = ChallengeFactory.create(challengeType, challengeDiv, eventManager);\r\n\t\tconsole.debug(`Creating challenge ${challengeType}`);\r\n\t\tactiveChallenge.enforceTyping();\r\n\t}\r\n\tcatch(error){\r\n\t\tconsole.error(error.message)\r\n\t}\r\n}\r\n\r\nconst observer = new MutationObserver(enforceTyping);\r\nobserver.observe(document.body, {childList: true, subtree: true});\r\n\r\nenforceTyping();\r\n"],"names":["ExtensionEventManager","WordBank","Challenge","challengeDiv","eventManager","_classCallCheck","_defineProperty","challengeType","getAttribute","replace","challengeId","Date","now","elements","extractElements","wordBank","querySelector","remainingChoices","console","debug","registerChallenge","_createClass","key","value","cleanInputText","inputField","text","length","slice","words","trim","split","endsWith","pop","cleanup","_this$elements","unregisterChallenge","remove","style","display","_this$challengeDiv$qu","question","textContent","submitButton","document","enforceTyping","wordMap","size","concat","injectTypingInput","handleBackspace","Error","handleSpace","_this","userInput","toLowerCase","has","get","selectWord","click","warn","Array","from","keys","border","animation","setTimeout","handleKeyEvent","event","handleSubmit","_this2","error","createElement","dataset","extension","setAttribute","cssText","parentNode","insertBefore","addEventListener","e","stopPropagation","stopImmediatePropagation","includes","preventDefault","focus","ChallengeFactory","register","challengeClass","prototype","name","registry","set","create","ChallengeClass","Map","ChallengeTapComplete","_Challenge","_callSuper","_inherits","removedWord","removedWordIndex","_iterator","_createForOfIteratorHelper","_step","s","n","done","word","indexOf","err","f","returnedButton","returnLastUsed","dataTestValue","buttons","_toConsumableArray","querySelectorAll","filter","btn","_btn$querySelector","targetButton","at","ChallengeTranslate","activeButton","find","activeChallenges","initGlobalKeyCapture","textarea","target","closest","challenge","challengeInstance","wordBankDiv","extractWords","usedWordButtons","wordButtons","reduce","map","push","returnWord","wordButton","activeChallenge","_activeChallenge$clea","_activeChallenge","call","hasAttribute","message","observer","MutationObserver","observe","body","childList","subtree"],"sourceRoot":""}